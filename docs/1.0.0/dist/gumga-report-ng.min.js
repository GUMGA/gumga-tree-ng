!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e,n){"use strict";function i(t,e,n,i,o,r,a){function u(t,e){t&&e&&Object.keys(t).forEach(function(n){t[n]instanceof Object?u(t[n],e[n]):e[n]&&(t[n]=e[n])})}var c=this,s={},l={};c.options=c.options||{appearance:{fullScreenMode:!1},height:"940px"};var p=function(t){t.onCreateReport=function(t){if(s&&s.jsonReport){new e.Stimulsoft.Report.StiReport;t.isWizardUsed=!1,t.report=entity.name.definition,t.report.reportFile=entity.name}}},d=function(t){t.onBeginProcessData=function(t){r.isEnableOi()}},f=function(t){t.onSaveReport=function(t){t.report.reportName=t.fileName,t.report.reportAlias=t.fileName;var e=t.report.saveToJsonString();c.entity.name=t.fileName,c.entity.definition=e,r.save(c.entity).then(function(t){c.onSave&&c.onSave({$value:t.data.data})})}},g=function(){StiOptions.WebServer.url=r.connectionLocal,StiOptions.Services._databases=[],c.databases||(c.databases="postgresql,mysql,oracle"),c.databases.includes("postgresql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiPostgreSQLDatabase),c.databases.includes("mysql")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiMySqlDatabase),c.databases.includes("oracle")&&StiOptions.Services._databases.add(new Stimulsoft.Report.Dictionary.StiOracleDatabase)};t.configureEntity=function(){if(c.entity){g();var t=new e.Stimulsoft.Designer.StiDesignerOptions;u(t,c.options);var n=new e.Stimulsoft.Designer.StiDesigner(t,"StiDesigner",!1),i=new e.Stimulsoft.Report.StiReport;if(c.entity.id)i.load(c.entity.definition);else{var o=new Stimulsoft.Report.Dictionary.StiMySqlDatabase("Security MySQL","","url=jdbc:mysql://localhost:3306/security?zeroDateTimeBehavior=convertToNull; user = root; password = senha;",!1),a=new Stimulsoft.Report.Dictionary.StiOracleDatabase("Security Oracle","","url=jdbc:oracle:thin:@localhost:1521/orcl;user = root;password = senha;",!1);i.dictionary.databases.clear(),i.dictionary.databases.add(o),i.dictionary.databases.add(a),i.dictionary.synchronize()}i.dictionary.variable=l,f(n),p(n),d(n),n.report=i,r.licenseKey()&&(e.Stimulsoft.Base.StiLicense.key=r.licenseKey()),n.renderHtml("designer")}},t.init=function(e){o(function(){e?c.entity=e:r.getNew().then(function(t){c.entity=t.data}),t.configureEntity()})},t.configureEntityViewer=function(){if(c.entity){StiOptions.WebServer.url=r.connectionLocal;var t=new e.Stimulsoft.Viewer.StiViewer(null,"StiViewer",!1),n=new e.Stimulsoft.Report.StiReport;n.load(c.entity.definition),n.dictionary.variable=c.variables,d(t),t.report=n,t.renderHtml("viewer")}},t.initViewer=function(e){o(function(){e?c.entity=e:r.getNew().then(function(t){c.entity=t.data}),t.configureEntityViewer()})},c.updateReport=function(e){c.viewer?t.initViewer(e):t.init(e)},c.$onChanges=function(t){t.viewer&&t.viewer.currentValue&&c.entity&&c.updateReport(c.entity),t.entity&&t.entity.currentValue&&t.entity.currentValue.id&&c.updateReport(t.entity.currentValue)},t.$watch("$ctrl.options",function(e){t.configureEntity()},!0)}Object.defineProperty(e,"__esModule",{value:!0}),i.$inject=["$scope","$window","gumgaController","$q","$timeout","$gumgaReport","$attrs"];var o=n(3),r={bindings:{viewer:"<?",entity:"<",onSave:"&?",options:"<?",databases:"<?",additionalFilter:"<?"},templateUrl:o,controller:i};e.default=r},function(t,e,n){"use strict";function i(){return{$get:["GumgaRest","$http",function(t,e){var n=this;n._isEmpty=function(t){return void 0==t||null==t},n._APILocation=n._APILocation||window.APILocation,n._token=n._token||sessionStorage.getItem("token")||localStorage.getItem("token"),n._licenseKey=n._licenseKey||void 0,n._enableOi=n._isEmpty(n._enableOi)||n._enableOi,n._urlGumgaReport=n._urlGumgaReport||n._APILocation.apiLocation+"/api/gumgareport",n._urlReportConnection=n._urlReportConnection||n._APILocation.apiLocation+"/api/genericreport/reportconnection",n._token&&(n._urlGumgaReport=n._urlGumgaReport.concat("?gumgaToken="+n._token),n._urlReportConnection=n._urlReportConnection.concat("?gumgaToken="+n._token));var i=new t(n._urlGumgaReport);return i.connectionLocal=n._urlReportConnection,i.getUrlGumgaReport=function(){return n._urlGumgaReport.split("?")},i.getNew=function(){return e.get(i.getUrlGumgaReport()+"/new"+(n._token?"?gumgaToken="+n._token:""))},i.licenseKey=function(){return n._licenseKey},i.isEnableOi=function(){return n._enableOi},i}],setAPILocation:function(t){this._APILocation=t},getAPILocation:function(t){return this._APILocation},setLocalizationLang:function(t,e){Stimulsoft.Base.Localization.StiLocalization.addLocalizationFile(t,!1,e||"Portuguese (Brazil)"),Stimulsoft.Base.Localization.StiLocalization.setLocalizationFile(t,!0)},setToken:function(t){this._token=t},getToken:function(t){return this._token},setUrlGumgaReport:function(t){this._urlGumgaReport=t},getUrlGumgaReport:function(){return this._urlGumgaReport},setUrlReportConnection:function(t){this._urlReportConnection=t},getUrlReportConnection:function(){return this._urlReportConnection},setLicenseKey:function(t){this._licenseKey=t},getLicenseKey:function(t){return this._licenseKey},enableOi:function(){this._enableOi=!0},disableOi:function(){this._enableOi=!1}}}Object.defineProperty(e,"__esModule",{value:!0}),i.$inject=[],e.default=angular.module("gumga.report.provider",[]).provider("$gumgaReport",i)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var o=n(0),r=i(o),a=n(1);i(a);t.exports=angular.module("gumga.report",["gumga.report.provider"]).component("gumgaReport",r.default)},function(t,e){var n="/gumga-report.html";window.angular.module("ng").run(["$templateCache",function(t){t.put(n,'<div>\n\t<div ng-show="!$ctrl.viewer">\n\t\t<div id="designer"></div>\n\t</div>\n\n\t<div ng-show="$ctrl.viewer">\n\t\t<div id="viewer"></div>\n\t</div>\n\t<link rel="stylesheet" id="gumga-report-stylesheet">\n</div>')}]),t.exports=n}]);